# 《clean code》 读书笔记

拒绝勒布朗法则：稍后等于永不 Later equals never

好的代码，就像好的文章一样，容易理解，阅读舒服，还能引人思考

大师级程序员把系统当作故事来讲，而不是当作程序来写

## 简单代码规则：

- 能通过所有测试

- 没有重复代码

- 体现系统中的全部设计理念

- 包括尽量少的实体：比如类，方法，函数等

减少重复代码，提高表达能力，提早构建简单抽象。就是写整洁代码的方法

## 命名

有意义的命名

命名一定要能够准确又完整地表达变量或函数的意思

别害怕长名称。长而具有描述性的名称优于短而令人费解的名称

## 函数

函数要短小而集中，每个函数只解决一件事

函数参数尽量少于两个

### 怎么减少参数

- 写函数的时候可以传入默认值，这样有利于函数的重用复用；

- 无法删减的参数可以包成对象（类）；

- 当参数中有对象时，可以考虑把函数写成类的方法，这样就省去一个参数的麻烦；

- 把参数改成本类的成员变量，这样就不用传参的。最终的目的是有助于该函数的理解和维护。

### 其他tips

- 传入的参数不要是bool类型，这种情况就把函数分开写成两个函数；

- 用返回值不要用输出参数，混乱的使用很难做项目的交接；

- 传参和返回都要保证不是Null，否则就会多出很多的判断，而且代码也会很混乱；

- 不传入Null可以在上一层做一波判断解决，不返回Null就需要把询问和处理分开

## 注释

最好的注释是不写注释

注释很难去维护，代码不断的迭代，但是后续维护代码的人，很可能不会维护注释，这样错误的注释就诞生了。

错误的注释不如不注释，更应该依靠不写注释，来理解代码

## 测试

### TDD（测试驱动开发）三定律

- 在编写不能通过的单元测试前，不可编写生产代码。
- 只可编写刚好无法通过的单元测试，不能编译也算不过。
- 只可编写刚好足以通过当前失败测试的生产代码

### 整洁的测试要遵循FIRST原则

- 快速（Fast）测试应该够快。测试应该能快速运行。测试运行级慢，你就不会想要频繁地运行它。如果你不须繁运行测试，就不能尽早发现问题，也无法轻易修正，从而也不能轻而易举地清理代码。最终，代码就会腐坏。

- 独立（Indcpndcmt）测试应该相互独立。某个测试不应为下一个测试设定条件。你应可以单独运行每个测试，及以任何序运行测试。当测试互相赖时，头一个没通过就会导致一连申的测试失败，使问题诊断变得建，隐藏了下级错误。

- 可重复（Repeatble）测试应当可在任环境中重复通过，你应该能够在生产环境、质检环境中运行测试，也能够在无网络的列车上用笔记本电脑运行测试，如果测试不能在任意环境中重复，你就总会有个解释其失败的接口，当环境条件不具备时，你也会无法运行测试

- 自足验证（Self.Vlidaing）测试应该有布尔值输出。无论是通过或失败，你不应该查看日志文件来确认测试是否通过，你不应该于工对比两个不同文本文件来确认测试是否通过，如果测试不能自足验证，对失败的判断就会变得依主观，而运行测试也需要更长的手工操作时间。

- 及时（Timcly）测试应及时编写，单元测试应该好在使其通过的生产代码之前编写。如果在编写生产代码之后编写测试，你会发现生产代码难以测试。你可能会认为某些生产代码本身难以测试。你可能不会去设计可测试的代码。

## 类

类应该短小

过降低连接度，我们的类遵了另一条类设计原则，依赖倒置原则（DependcncnversionPrinciple，DIP）

本质而言，DIP认为类应当依赖于抽象而不是依赖于具细节

系统应该由许多短小的类而不是少量巨大的类组成。每个小类封装一个权责，只有一个修改的原因，并与少数其他类一起协同达成期望的系统行为。

扩展阅读：

[GitHub - pipiliang/clean-code-typescript: TypeScript 代码整洁之道](https://github.com/pipiliang/clean-code-typescript)

[GitHub - ryanmcdermott/clean-code-javascript: :bathtub: Clean Code concepts adapted for JavaScript](https://github.com/ryanmcdermott/clean-code-javascript)

[GitHub - martinshao/clean-code-javascript: JavaScript版本代码整洁之道-中文版](https://github.com/martinshao/clean-code-javascript)
